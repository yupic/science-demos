# Отчёт: генерация делений оси X

## Повторяющийся код
Во всех интерактивных демо гистограмм определена одинаковая функция `generateXTicks` с логикой вычисления «приятного» шага и подбором числа подписей исходя из ширины области отрисовки. Код функции полностью дублируется в:
- `sum_histogram_multi.html` — используется в `draw()` для подписей оси X сглаженного распределения суммы бросков. 【F:sum_histogram_multi.html†L104-L137】【F:sum_histogram_multi.html†L266-L286】
- `coin_histogram_multi.html` — применяется при отрисовке подписей в гистограмме многократных подбрасываний монет. 【F:coin_histogram_multi.html†L208-L241】【F:coin_histogram_multi.html†L363-L392】
- `coin_histogram_animation.html` — вычисляет подписи оси X для анимированной гистограммы биномиального распределения. 【F:coin_histogram_animation.html†L154-L187】【F:coin_histogram_animation.html†L285-L313】
- `sum_histogram_weighted.html` — используется при статической отрисовке осей в сумме бросков с весами. 【F:sum_histogram_weighted.html†L276-L309】【F:sum_histogram_weighted.html†L346-L373】

Функция везде идентична по содержанию и интерфейсу: принимает границы домена `{ min, max }`, доступную ширину и минимальный промежуток между подписями, возвращает массив значений.

## Возможность вынесения в общий файл
Так как код совпадает и не использует замыканий на локальные переменные конкретных страниц, функцию можно вынести в отдельный JS‑файл (например, `axis-utils.js`). Текущие зависимости ограничиваются стандартными математическими операциями и входными аргументами, что упрощает повторное использование без контекста страницы.

## Предлагаемый объём изменений
1. Создать файл `axis-utils.js` в корне проекта и экспортировать из него `generateXTicks` (через глобальный объект, например `window.AxisUtils.generateXTicks`, либо через ES‑модуль, если перейти на `<script type="module">`).
2. В каждом HTML-файле удалить локальное объявление `generateXTicks` и подключить общий файл через `<script src="axis-utils.js"></script>` (для inline-скриптов потребуется убедиться, что подключение выполняется до использования функции).
3. Обновить вызовы `generateXTicks` в существующем коде либо обращаться к пространству имён (`AxisUtils.generateXTicks`) в зависимости от выбранного способа экспорта.
4. При необходимости перенести смежные функции форматирования подписей (расчёт числа знаков, вывод процентов) в тот же файл, чтобы избежать мелких дубликатов в будущем.

Вывод: обобщение возможно без изменения логики расчётов; требуются минимальные правки подключения скрипта и удаления дубликатов в четырёх HTML-файлах.
